#!/bin/sh

#usage: post4review <branch name> <title> <description> <target>
RADARID=$1
TITLE=$2
DESCRIPTION=$3
BUILD_TARGET=$4

cd ${TUNABLES_SHASTA_DIR}
git checkout master
git pull
git submodule update
git checkout -b PR-${RADARID}-tun
echo "
${TITLE}

Summary:
 - Tunable header files updated
${DESCRIPTION}

Test Plan:
   N/A

Reviewers: manas
" > /tmp/commitmsg
git commit -a -F /tmp/commitmsg
arc diff --verbatim
echo "Building ${BUILD_TARGET}"
make clean ${BUILD_TARGET} -j6
if [ $? -eq 0 ]; then
    echo "Build success";
    exit 0;
else
    echo "Build failed";
    exit -1;
fi
git checkout master
